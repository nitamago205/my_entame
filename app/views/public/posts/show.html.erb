<div class='container'>
  <div class='row'>
		<h2 class="my-4 bg-light">投稿詳細</h2>
		<table class='table'>
		  <tr>
        <td>ユーザー名</td>
        <td>
          <%= link_to(@post.user) do %>
            <%= image_tag @post.user.get_profile_image, size:"60x60" %>
            <%= @post.user.name %>
          <% end %>
        </td>
      </tr>
      <tr>
        <td>タイトル</td>
        <td><%= @post.title %></td>
      </tr>
      <tr>
        <td>本文</td>
        <td><%= @post.body %></td>
      </tr>
      <tr>
        <td>ジャンル名</td>
        <td><%= @post.genre.genre_name %></td>
      </tr>
      <tr>
        <td>いいね数</td>
        <td id="favorite_buttons_<%= @post.id %>">
          <% if user_signed_in? %>
            <%= render "public/favorites/btn", post: @post %>
          <% else %>
            <i class="fas fa-heart" aria-hidden="true"></i>
            <%= @post.favorites.count %>
          <% end %>
        </td>
      </tr>
      <tr>
        <td>コメント数</td>
        <td class="post-comments-counter">
          <%= render "public/post_comments/counter", post: @post %>
        </td>
      </tr>
      <tr>
        <td>レート</td>
        <td><%= render "static_rate", post: @post %></td>
      </tr>
        <% if @post.user == current_user %>
          <td><%= link_to '編集', edit_post_path(@post), class: "btn btn-sm btn-success edit_post_#{@post.id}" %></td>
          <td><%= link_to '削除', @post, method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-sm btn-danger destroy_post_#{@post.id}" %></td>
        <% end %>
    </table>
  </div>
  <div>
    <div class="row">
      <h3 class="my-2 bg-light">マイセレクト一覧</h3>
    </div>
    <div class="row">
      <% if @post.user == current_user %>
        <%= link_to new_post_my_select_path(@post), class: "text-dark mb-2" do %>
          <i class="fas fa-plus"></i> 新規マイセレクト追加
        <% end %>
      <% end %>
    </div>
    <div class="row">
      <% if @selects.exists? %>
        <table class='table table-hover table-inverse'>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>本文</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @selects.each do |select| %>
              <tr>
                <td><%= select.title %></td>
                <td><%= select.body %></td>
                 <% if @post.user == current_user %>
                  <td>
                    <%= link_to '編集', edit_post_my_select_path(@post, select), class: "btn btn-sm btn-success edit_post_my_select_#{select.id}" %>
                    <%= link_to '削除', post_my_select_path(@post, select), method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-sm btn-danger destroy_post_my_select_#{select.id}" %>
                  </td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p>マイセレクトはありません</p>
      <% end %>
    </div>

    <div>
      <div class="row">
        <h3 class="my-2 bg-light">コメント</h3>
      </div>
      <div class="post-comments-index">
        <%= render "public/post_comments/index", post: @post %>
      </div>

      <%= render "public/post_comments/form", post: @post, post_comment: @post_comment %>
    </div>

  </div>
</div>