<div class='container'>
  <div class='row'>
    <h2 class="my-5 bg-light">投稿一覧</h2>
  </div>
  <div class="row">
    <%= search_form_for @q, url: admin_posts_path do |f| %>
      <%= f.label :title, "投稿タイトル検索" %>
      <%= f.search_field :title_cont %>

      <%= f.label :genre_id, "ジャンル" %>
      <%= f.collection_select :genre_id_eq, @genres, :id, :genre_name, include_blank: '指定なし' %>
      <%= f.submit "検索" %>
    <% end %>
  </div>
  <%= sort_link(@q, :created_at, "古い順/新しい順") %> |
  <%= sort_link(@q, :rate, "レート低い順/高い順") %>
  <div class="row">
    <table class='table table-hover table-inverse'>
      <thead>
        <tr>
          <th>ユーザー名</th>
          <th>タイトル</th>
          <th>ジャンル名</th>
          <th>いいね数</th>
          <th>レート</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>
        <% @posts.each do |post| %>
          <tr>
            <td><%= link_to(post.user) do %>
              <%= image_tag post.user.get_profile_image, size:'50x50' %>
              <%= post.user.name %>
              <% end %>
            </td>
            <td><%= link_to post.title, admin_post_path(post), class: "post_#{post.id}" %></td>
            <td><%= post.genre.genre_name %></td>
            <td><i class="fas fa-heart"></i>︎<%= post.favorites.count %></td>
            <!--<td><%#= render "post_comments/counter", post: post %></td>-->
            <td><%= render "public/posts/static_rate", post: post %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>